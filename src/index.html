<html>

<head>
    <!--No cache for debugging purposes-->
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <script src="unijs_core/lock.js"></script>
    <script src="unijs_core/streams.js"></script>
    <script src="unijs_core/fileSystem.js"></script>
    <script src="unijs_modules/corePrograms.js"></script>
    <script src="unijs_modules/stdlib.js"></script>
    <script src="unijs_core/cmd.js"></script>
    <script src="unijs_core/jquery.js"></script>
    <script src="unijs_core/terminal.js"></script>
    <link href="css/style.css" rel="stylesheet" />
    <link href="css/animations.css" rel="stylesheet" />
    <link href="css/jquery.terminal.css" rel="stylesheet" />
</head>

<body>
    <div id="highlightLeft"></div>
    <div id="highlightRight"></div>
    <div id="highlightTop"></div>
    <div id="highlightBottom"></div>
    <script src="unijs_core/windows.js"></script>
    <script>
        var unijsinit=
``;  

        var rclocal=
`cd /usr/bin
cat /usr/bin_list | install
`;        
        
        
        if(typeof Windows != "undefined"){
            var applicationView = Windows.UI.ViewManagement.ApplicationView.getForCurrentView();
            var boolean = applicationView.tryEnterFullScreenMode();
        }
        var CMD=CMD_MODULE();
		var manager = WM();
		var w1=manager.Window();
        var fs=FS();
        var result=fs.readFile("/etc/rc.local");
        if(result==false){ //If the init file has not been created
                fs.navigatePath("/");
                fs.createFolder("etc");
                fs.navigateChild("etc");
                fs.createFile("rc.local",rclocal);
                fs.createFile("unijs.init",unijsinit);
                fs.navigatePath("/");
                fs.createFolder("home");
                fs.createFolder("usr");
                fs.navigateChild("usr");
                fs.createFolder("bin");
                fs.createFolder("lib");
                result=CMD.executeCommand("cmd /etc/unijs.init", Stream(), manager, w1);     
                result.stderr.on("data", function(x){
                    console.log(x);
                });  
                result.stdout.on("data", function(x){
                    console.log(x);
                });   
                result.stdout.on("end", function(){
                    startup();
                }); 
        }else{
            startup();
        }
        function startup(){
            fs=null;
            CMD.registerLibraries(stdlib);
            CMD.registerPrograms(corePrograms);
            result=CMD.executeCommand("cmd /etc/rc.local", Stream(), manager, w1); //This may take a while, the window is already open
            result.stdout.on("end", function(){

            })
        }
    </script>
</body>

</html>